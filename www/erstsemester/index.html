<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0" />
  <meta name="description" content="Umfrage Studienbewerbung" />
  <meta name="author" content="Psychoinformatics Lab" />

  <title>How Do You Science?</title>

  <link rel='stylesheet' href='/css/dmc.css' />
  <link rel='stylesheet' href='/css/survey.css' />

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v2">
  <link rel="icon" type="image/png" href="/favicon-32x32.png?v2" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png?v2" sizes="16x16">
  <link rel="manifest" href="/manifest.json?v2">
  <link rel="mask-icon" href="/safari-pinned-tab.svg?v2" color="#5bbad5">
  <link rel="shortcut icon" href="/favicon.ico?v2">
  <meta name="theme-color" content="#ffffff">
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      survey = document.getElementById("survey");
      fields = survey.elements;
    });
  </script>
  <noscript><style>#survey, #start { display: none; }</style></noscript>
</head>

<body>
<noscript>
  <h1>This Survey Requires JavaScript</h1>
  <p>I know, I know...
    <br />Sites requiring JavaScript bother me too. And now I'm among them. Argh!
    <br />But I kinda need JS to figure out which survey questions should be asked.
    <br />
    <br />I can, however, assure you that we're not showing ads, tracking you, or committing any other form of mass-malarky.
    <br />
    <br />This is a <em>Zero Malarky Zone</em> (ZMZ).
    <br />I promise.
    <br />
    <br />&mdash;Alex (of the League Against Web Malarky)
  </p>
</noscript>

<header>
  <h1>How Do <strong>You</strong> Science?</h1>
  <a id='start' class='icon-right-open button'>Ja, unbedingt teilnehmen!</a>
  <p>no&nbsp;email&nbsp;or&nbsp;account&nbsp;required</p>
</header>

<main>
<p id='blurb'>
  Tell us about your attitudes and experiences. With attitude.<br />
  Conducted by Alex Waite, Michael Hanke, and a ferocious wombat.
</p>
<form id='survey' autocomplete='off'>
  <input name='client_version' type='hidden' value='1' />

  <div class='timeline'>
    <div class="tl-panel badge-clock visible">
      <h2>Verfahrensdauer</h2>
      <p>Wieviele Wochen sind zwischen Bewerbung und Zusage vergangen?</p>
      <input name="apply_time" type="number" min="0" required>
    </div>

    <div class="tl-panel badge-university">
      <h2>Studienort</h2>
      <p>War Magdeburg Deine erste Wahl?</p>
      <select name="first_choice" required>
        <option value="" disabled selected hidden>— Auswahl —</option>
        <option>Ja</option>
        <option>Nein</option>
      </select>
      <script>document.addEventListener('DOMContentLoaded', function() {
        fields['first_choice'].postValidation = function() {
          var panel = getPanel(this);
          if (this.value == 'Ja') {
            hidePanel(fields['why_not']);
            panel.dataset.nextPanel = 'grade';
          }
        }
      });</script>
    </div>

    <div class="tl-panel badge-university">
      <h2>Schade!</h2>
      <p>Warum nicht?</p>
      <input type="text" name="why_not">
    </div>

    <div class="tl-panel badge-university">
      <h2>Abiturnote</h2>
      <p>Mit welcher Abiturnote hast Du Dich beworben?</p>
      <input name="grade" type="number" step="0.1" min="1"> <!--TODO: What's max?-->
    </div>

    <div class="tl-panel badge-university">
      <h2>Erststudium</h2>
      <p>Handelt es sich um Dein Erststudium?</p>
      <select name="first_study" required>
        <option value="" disabled selected hidden>— Auswahl —</option>
        <option>Ja</option>
        <option>Nein</option>
      </select>
    </div>

    <div class="tl-panel badge-university">
      <h2>Deine Meinung</h2>
      <p>Was h&auml;ltst Du gut bzw. schlecht am Bewerbungsverfahren?</p>
      <textarea name="judgement" form="survey">Sag uns Deine Meinung.</textarea>
      <br>
      <!-- TODO: Probably move to survey.js and have a general treatment of textarea's class-->
      <script>document.addEventListener('DOMContentLoaded', function() {

        var panel = getPanel(fields['judgement']);
        var button = document.createElement('a');
        button.classList.add('button');
        button.tabIndex = 0;
        button.innerHTML = "<i class='icon-right-open'></i>N&auml;chste Frage";

        var events = ['click', 'keypress'];
        for (var j = 0, e; e = events[j++];) {
          button.addEventListener(e, function() {
            markValid(this);
            scrollToNextPanel(this);
          });
        }
        panel.appendChild(button);
      });</script>
    </div>

    <div class="tl-panel badge-university">
      <h2>Erstsemester-Service</h2>
      <p>Welche Angebote des Erstsemester-Service hast Du genutzt?</p>
      <div class="checkboxes extendable">
        <!-- TODO: List -->
        <label><input type='checkbox' name='services[]'
          value='None'> Keine</label>
      </div>
    </div>

    <!-- TODO: only if there was a choice other than 'None' above -->
    <div class="tl-panel badge-university">
      <h2>N&uuml;tzlichkeit</h2>
      <p>Haben Dir diese Angebote geholfen?</p>
      <select name="helpful">
        <option value="" disabled selected hidden>— Auswahl —</option>
        <option>Ja</option>
        <option>Nein</option>
      </select>
    </div>

    <div class="tl-panel bagde-university">
      <h2>Verbesserungsvorschl&auml;ge</h2>
      <p>Welche andere Unterst&uuml;tzung h&auml;ttest Du Dir gew&uuml;nscht?</p>
      <input name="suggestion" type="text">
    </div>

    <div class='tl-panel badge-globe'>
      <h2>Heimatland</h2>
      <p>Aus welchem Bundesland kommst Du?</p>
      <select name='state'>
        <option value='' disabled selected hidden>— Auswahl —</option>
        <option>Baden-W&uuml;rttemberg</option>
        <option>Bayern</option>
        <option>Berlin</option>
        <option>Brandenburg</option>
        <option>Bremen</option>
        <option>Hamburg</option>
        <option>Hessen</option>
        <option>Mecklenburg-Vorpommern</option>
        <option>Niedersachsen</option>
        <option>Nordrhein-Westfalen</option>
        <option>Rheinland-Pfalz</option>
        <option>Saarland</option>
        <option>Sachsen</option>
        <option>Sachsen-Anhalt</option>
        <option>Schleswig-Holstein</option>
        <option>Th&uuml;ringen</option>
        <option>Keines - ich komme nicht aus Deutschland</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-glass'>
      <h2>All Done!</h2>
      <p>And <em>well done</em>.</p>
      <a id='done' class='button' role='button' tabindex='0'><i class='icon-right-open'></i>Submit</a>
      <input name='done' type='hidden' />
    </div>
  </div>
</form>
</main>
<footer>
  <p><small>
    ©2015&ndash;2016 Alex Waite
    <span class='break'>&nbsp;&mdash;&nbsp;</span>
    source code on <a href="https://github.com/psychoinformatics-de/dmc">GitHub</a>
    <br /><a href="http://psychoinformatics.de">psychoinformatics.de</a>
  </small></p>
</footer>

<script src="/js/survey.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // init the survey
  initSurvey('erstsemester', survey, survey.querySelector('#done'));

  // landing button
  var start = document.getElementById('start');
  var blurb = document.getElementById('blurb');
  var first_panel = survey.querySelector('.tl-panel.visible');
  var events = ['click', 'keypress'];
  for (var i = 0, e; e = events[i++];) {
    start.addEventListener(e, function() {
      scrollTo(blurb, 1500);
      first_panel.querySelector('input,select').focus();
    });
  }
});
</script>
</body>
</html>
